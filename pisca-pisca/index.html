<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="style.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="input-color-picker.css" />
    <title>pisca-pisca</title>
  </head>
  <body>
    <ul class="pisca-pisca" id="piscaPisca">
      <li id="light1" class="light" onclick="openColorPicker('light1')"></li>
      <li id="light2" class="light" onclick="openColorPicker('light2')"></li>
      <li id="light3" class="light" onclick="openColorPicker('light3')"></li>
    </ul>
    <button onclick="toggleAnimation()">Parar Animação</button>

    <script src="input-color-picker.js"></script>
    <script>
      let animationRunning = true;

      // Função para alterar dinamicamente a cor e velocidade de um elemento específico
      function changeLightProperties(lightId, color, speed) {
        const lightElement = document.getElementById(lightId);
        lightElement.style.setProperty("--color", color);
        lightElement.style.setProperty("--speed", speed);
      }

      // Função para iniciar ou parar a animação
      function toggleAnimation() {
        const piscaPisca = document.getElementById("piscaPisca");
        const lights = document.querySelectorAll(".light");

        if (animationRunning) {
          piscaPisca.style.animation = "none";
          lights.forEach(light => light.style.animation = "none");
        } else {
          piscaPisca.style.animation = "pisca 1s infinite";
          lights.forEach((light, index) => {
            light.style.animation = `pisca 1s infinite ${index * 0.2}s`;
          });
        }

        animationRunning = !animationRunning;
      }

      // Função para abrir o seletor de cores
      function openColorPicker(lightId) {
        const colorPicker = document.createElement("input");
        colorPicker.type = "color";
        colorPicker.value = getComputedStyle(document.getElementById(lightId)).getPropertyValue("--color");
        colorPicker.addEventListener("input", function() {
          changeLightProperties(lightId, this.value, "0.8s");
        });
        colorPicker.click();
      }

      changeLightProperties("light1", "#ff9900", "0.8s");
      changeLightProperties("light2", "#00ff00", "0.8s");
      changeLightProperties("light3", "#0000ff", "0.8s");
    </script>
  </body>
</html>
